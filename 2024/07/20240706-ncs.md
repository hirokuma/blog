# ncs: toolchain と SDK

<i>2024/07/06</i>

vscodeのnRF Connect extensionをサイドパネルで開くとこうなっている。

![image](20240706a-1.png)

最初に設定がいるのは上2つの「Toolchains」と「SDKs」だ。
同じバージョンをインストールしておくのが普通のようだが、違いを把握しておきたい。というのも、いま ncs v2.7.0 がリリースされたばかりなのだが、Toolchain v2.7.0 は普通にインストールできるものの SDK v2.7.0 は確認を求められるのだ。
vscodeだからメッセージが出ているようだが気になるところだ。

![image](20240706a-2.png)

nRF Connect SDKの[Installation](https://docs.nordicsemi.com/bundle/ncs-latest/page/nrf/installation/install_ncs.html#install_the_nrf_connect_sdk_toolchain)

## Toolchain Manager

nRF Connect for Desktopでインストールできるのは Toolchain ではなく「Toolchain Manager」である。

![image](20240705a-3.png)

v1.5.0がリリースされたばかりなのだが[説明](https://github.com/NordicSemiconductor/pc-nrfconnect-toolchain-manager/releases/tag/v1.5.0)に vscode だと ncs 2.7 で警告を出すようになったということが書いてある。

なお、nRF Connect SDK v2.0.0以降は単体のToolchain Managerではなくvscodeのextensionを使うことを推奨している。  
単体でもexperimentalと表示されているので、v1.5.0のリリースノートに書かれているのは「vsccodeでも警告を出す」くらいに思っておけば良いだろう。

![image](20240706a-3.png)

## Toolchain

ではvscodeのextensionからToolchainだけインストールしてみよう。一度 v2.7.0 はインストールしていたのだが、アンインストールしてディレクトリ(`c:/ncs/v2.7.0`)ごと削除している。


変な感じがするが、Toolchain v2.7.0のインストールについては警告は出ない。

![image](20240706a-4.png)

一度インストールしたことがあると、このようにダウンロード済みのファイルを使うようだ。

![image](20240706a-5.png)

Toolchainは`c:/ncs/v2.7.0`にインストールされるのではなく`c:/ncs/toolchains/`以下にインストールされている。  
普通、toolchainというとコンパイラとかリンカとかを指すと思う。[インストールの説明](https://docs.nordicsemi.com/bundle/ncs-latest/page/nrf/installation/install_ncs.html#install_the_nrf_connect_sdk_toolchain)でも「The toolchain version should match the nRF Connect SDK version you are going to work with」と書いてあるので、このSDKはこのToolchainで動かすことしか想定していませんよ、ということなのだろう。
Toolchainのインストールで警告が出ないのも納得だ。

## SDK

これは警告が出るだけで、特段かわりはない。
最初に保存するディレクトリ(今回は`c:\ncs\v2.7.0`)を聞かれるだけである。

ダウンロードしてインストールするのだが、[west](https://docs.zephyrproject.org/latest/develop/west/index.html)というツールが使われている。Zephyr OSのツールなのか。
複数の`git`リポジトリから`clone`しているようなのでそういうツールかと思ったのだが、ページには「swiss-army knife command line tool」と力強く書いてあった。
`west`はvscodeのextensionがうまいこと使ってくれているようだから、あまり気にしなくてもよさそうだ。

`west`のログに出ている`git clone`していそうなリポジトリはこれらだ。多い！

* [west]: From https://github.com/nrfconnect/sdk-zephyr
* [west]: From https://github.com/BabbleSim/bsim_west
* [west]: From https://github.com/nrfconnect/sdk-hostap
* [west]: From https://github.com/nrfconnect/sdk-wi-fiquicktrack-controlappc
* [west]: From https://github.com/nrfconnect/sdk-mcuboot
* [west]: From https://github.com/laurencelundblade/QCBOR
* [west]: From https://github.com/nrfconnect/sdk-mbedtls
* [west]: From https://github.com/nrfconnect/sdk-oberon-psa-crypto
* [west]: From https://github.com/nrfconnect/sdk-nrfxlib
* [west]: From https://github.com/nrfconnect/sdk-trusted-firmware-m
* [west]: From https://github.com/nrfconnect/sdk-psa-arch-tests
* [west]: From https://github.com/nrfconnect/sdk-connectedhomeip
* [west]: Submodule 'nlio' (https://github.com/nestlabs/nlio.git) registered for path 'third_party/nlio/repo'
* [west]: Submodule 'nlassert' (https://github.com/nestlabs/nlassert.git) registered for path 'third_party/nlassert/repo'
* [west]: Submodule 'nlunit-test' (https://github.com/nestlabs/nlunit-test.git) registered for path 'third_party/nlunit-test/repo'
* [west]: Submodule 'pigweed' (https://github.com/google/pigweed.git) registered for path 'third_party/pigweed/repo'
* [west]: Submodule 'third_party/jsoncpp/repo' (https://github.com/open-source-parsers/jsoncpp.git) registered for path 'third_party/jsoncpp/repo'
* [west]: From https://github.com/nrfconnect/sdk-soc-hwmv1
* [west]: From https://github.com/nrfconnect/sdk-cjson
* [west]: From https://github.com/nrfconnect/azure-sdk-for-c
* [west]: From https://github.com/nrfconnect/sdk-mcu-drivers
* [west]: From https://github.com/nrfconnect/sdk-openthread
* [west]: From https://github.com/nrfconnect/suit-generator
* [west]: From https://github.com/nrfconnect/suit-processor
* [west]: From https://github.com/ThrowTheSwitch/cmock
* [west]: Submodule 'vendor/c_exception' (https://github.com/throwtheswitch/cexception.git) registered for path 'vendor/c_exception'
* [west]: Submodule 'vendor/unity' (https://github.com/throwtheswitch/unity.git) registered for path 'vendor/unity'
* [west]: From https://github.com/memfault/memfault-firmware-sdk
* [west]: From https://github.com/eembc/coremark
* [west]: From https://github.com/zephyrproject-rtos/canopennode
* [west]: From https://github.com/zephyrproject-rtos/chre
* [west]: From https://github.com/zephyrproject-rtos/lz4
* [west]: From https://github.com/zephyrproject-rtos/nanopb
* [west]: From https://github.com/zephyrproject-rtos/tf-m-tests
* [west]: From https://github.com/zephyrproject-rtos/zscilib
* [west]: From https://github.com/zephyrproject-rtos/cmsis
* [west]: From https://github.com/zephyrproject-rtos/cmsis-dsp
* [west]: From https://github.com/zephyrproject-rtos/cmsis-nn
* [west]: From https://github.com/zephyrproject-rtos/edtt
* [west]: From https://github.com/zephyrproject-rtos/fatfs
* [west]: From https://github.com/zephyrproject-rtos/hal_nordic
* [west]: From https://github.com/zephyrproject-rtos/hal_st
* [west]: From https://github.com/zephyrproject-rtos/hal_wurthelektronik
* [west]: From https://github.com/zephyrproject-rtos/libmetal
* [west]: From https://github.com/zephyrproject-rtos/liblc3
* [west]: From https://github.com/zephyrproject-rtos/littlefs
* [west]: From https://github.com/zephyrproject-rtos/loramac-node
* [west]: From https://github.com/zephyrproject-rtos/lvgl
* [west]: From https://github.com/zephyrproject-rtos/mipi-sys-t
* [west]: From https://github.com/zephyrproject-rtos/net-tools
* [west]: From https://github.com/zephyrproject-rtos/nrf_hw_models
* [west]: From https://github.com/zephyrproject-rtos/open-amp
* [west]: From https://github.com/zephyrproject-rtos/picolibc
* [west]: From https://github.com/zephyrproject-rtos/segger
* [west]: From https://github.com/zephyrproject-rtos/tinycrypt
* [west]: From https://github.com/zephyrproject-rtos/uoscore-uedhoc
* [west]: From https://github.com/zephyrproject-rtos/zcbor

